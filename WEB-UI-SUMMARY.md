# Web UI åŠŸèƒ½æ€»ç»“

## âœ¨ å·²å®ç°åŠŸèƒ½

### 1. åç«¯æœåŠ¡ (web/server.ts)
- âœ… Bun åŸç”Ÿ Web æœåŠ¡å™¨
- âœ… RESTful API è·¯ç”±
- âœ… WebSocket æœåŠ¡å™¨
- âœ… é™æ€æ–‡ä»¶æœåŠ¡
- âœ… CORS æ”¯æŒ
- âœ… é”™è¯¯å¤„ç†

### 2. API ç«¯ç‚¹

#### ä¼šè¯æŸ¥è¯¢ (web/api/sessions.ts)
- `GET /api/sessions/recent?limit=N` - æœ€è¿‘ä¼šè¯
- `GET /api/sessions/by-type?type=coding` - æŒ‰ç±»å‹
- `GET /api/sessions/by-directory?directory=/path` - æŒ‰ç›®å½•
- `GET /api/sessions/by-host?hostname=myhost` - æŒ‰ä¸»æœº
- `GET /api/sessions/{id}` - å•ä¸ªä¼šè¯è¯¦æƒ…

#### ç»Ÿè®¡æ•°æ® (web/api/stats.ts)
- `GET /api/stats/global` - å…¨å±€ç»Ÿè®¡
- `GET /api/stats/types` - ç±»å‹åˆ†å¸ƒ
- `GET /api/stats/directories?limit=10` - æœ€æ´»è·ƒç›®å½•
- `GET /api/stats/timeline?days=30` - æ—¶é—´çº¿è¶‹åŠ¿

#### å¥åº·æ£€æŸ¥
- `GET /api/health` - æœåŠ¡å™¨çŠ¶æ€

### 3. å‰ç«¯ç•Œé¢ (web/public/)

#### ä»ªè¡¨æ¿ç»„ä»¶
- **ç»Ÿè®¡å¡ç‰‡**
  - æ€»ä¼šè¯æ•°
  - æ´»è·ƒé¡¹ç›®æ•°
  - å¹³å‡æ—¶é•¿
  - æ€»æ—¶é•¿

- **å¯è§†åŒ–å›¾è¡¨**
  - ç±»å‹åˆ†å¸ƒé¥¼å›¾ (Chart.js Doughnut)
  - 30å¤©è¶‹åŠ¿æŠ˜çº¿å›¾ (Chart.js Line)

#### äº¤äº’åŠŸèƒ½
- **è¿‡æ»¤å™¨**
  - ä¼šè¯ç±»å‹ä¸‹æ‹‰é€‰æ‹©
  - ç›®å½•æœç´¢è¾“å…¥
  - æ˜¾ç¤ºæ•°é‡é€‰æ‹©
  - é‡ç½®æŒ‰é’®

- **ä¼šè¯åˆ—è¡¨**
  - å“åº”å¼å¡ç‰‡å¸ƒå±€
  - ç±»å‹å½©è‰²æ ‡ç­¾
  - ç›¸å¯¹æ—¶é—´æ˜¾ç¤º
  - Git ä¿¡æ¯å±•ç¤º
  - æ‚¬åœæ•ˆæœ

- **è¯¦æƒ…æ¨¡æ€æ¡†**
  - ä¼šè¯å…ƒæ•°æ®
  - å·¥å…·ä½¿ç”¨ç»Ÿè®¡ç½‘æ ¼
  - ä¿®æ”¹æ–‡ä»¶åˆ—è¡¨
  - ä¼šè¯æ‘˜è¦æ–‡æœ¬

#### å®æ—¶åŠŸèƒ½
- WebSocket è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨
- æ–°ä¼šè¯è‡ªåŠ¨åˆ·æ–°
- è‡ªåŠ¨é‡è¿æœºåˆ¶

### 4. å®ˆæŠ¤è¿›ç¨‹é›†æˆ

#### daemon/main.ts æ›´æ–°
- å¯é€‰å¯åŠ¨å‚æ•° `{ enableWebUI, webPort }`
- WebSocket å¹¿æ’­ä¼šè¯æ›´æ–°
- ä¼˜é›…å…³é—­æ—¶åœæ­¢ Web æœåŠ¡å™¨
- å¯åŠ¨æ—¥å¿—æ˜¾ç¤º Web UI URL

### 5. ç®¡ç†å·¥å…·

#### bin/claude-daemon.sh
```bash
claude-daemon start [--web-ui]  # å¯åŠ¨
claude-daemon stop              # åœæ­¢
claude-daemon restart           # é‡å¯
claude-daemon status            # çŠ¶æ€ï¼ˆå« Web UI æ£€æµ‹ï¼‰
claude-daemon logs [N|-f]       # æ—¥å¿—
```

ç¯å¢ƒå˜é‡:
- `WEB_PORT` - ç«¯å£é…ç½®ï¼ˆé»˜è®¤ 3000ï¼‰

### 6. æ–‡æ¡£

#### WEB-UI-GUIDE.md
- åŠŸèƒ½ç‰¹æ€§è¯´æ˜
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- ç•Œé¢ä½¿ç”¨è¯´æ˜
- API ç«¯ç‚¹æ–‡æ¡£
- å®‰å…¨å»ºè®®
- æ•…éšœæ’é™¤
- æ€§èƒ½æŒ‡æ ‡

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Browser (Vue 3 SPA)             â”‚
â”‚  - Dashboard / Charts / Sessions List   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTP + WebSocket
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Server (Bun.serve)                â”‚
â”‚   â”œâ”€â”€ API Router                        â”‚
â”‚   â”œâ”€â”€ WebSocket Server                  â”‚
â”‚   â””â”€â”€ Static File Server                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Layer                             â”‚
â”‚   â”œâ”€â”€ SessionsAPI (sessions.ts)         â”‚
â”‚   â””â”€â”€ StatsAPI (stats.ts)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Existing Services                     â”‚
â”‚   â”œâ”€â”€ SessionQuery (tools/)             â”‚
â”‚   â”œâ”€â”€ SessionStats (tools/)             â”‚
â”‚   â””â”€â”€ StorageService (daemon/)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æŠ€æœ¯é€‰å‹ç†ç”±

### åç«¯
- **Bun.serve**: å†…ç½®æ”¯æŒï¼Œé›¶é¢å¤–ä¾èµ–ï¼Œæ€§èƒ½ä¼˜ç§€
- **TypeScript**: ç±»å‹å®‰å…¨ï¼Œä¸ç°æœ‰ä»£ç ä¸€è‡´

### å‰ç«¯
- **Vue 3 CDN**: æ— éœ€æ„å»ºï¼Œå¼€å‘ç®€å•ï¼Œä½“ç§¯å°
- **TailwindCSS CDN**: å¿«é€ŸåŸå‹ï¼Œå“åº”å¼è®¾è®¡
- **Chart.js**: è½»é‡çº§å›¾è¡¨åº“ï¼ŒAPI ç®€æ´

### ä¼˜åŠ¿
1. **é›¶æ„å»ºæ­¥éª¤** - ç›´æ¥è¿è¡Œï¼Œæ— éœ€ webpack/vite
2. **é›¶é¢å¤–ä¾èµ–** - æ‰€æœ‰åº“é€šè¿‡ CDN
3. **å¿«é€Ÿè¿­ä»£** - ä¿®æ”¹å³ç”Ÿæ•ˆ
4. **æ˜“äºéƒ¨ç½²** - å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶

## ğŸ¯ ç”¨æˆ·ä½“éªŒ

### å¯åŠ¨æµç¨‹
```bash
# 1. å¯åŠ¨å¸¦ Web UI çš„å®ˆæŠ¤è¿›ç¨‹
claude-daemon start --web-ui

# è¾“å‡º:
# âœ“ Hook server started
# âœ“ Scheduler started
# âœ“ Web UI started
# ğŸš€ Claude Daemon started successfully
#    Web UI: http://127.0.0.1:3000
```

### è®¿é—®ç•Œé¢
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://127.0.0.1:3000`
2. è‡ªåŠ¨åŠ è½½ç»Ÿè®¡æ•°æ®å’Œä¼šè¯åˆ—è¡¨
3. å®æ—¶æ›´æ–°ï¼ˆæ–°ä¼šè¯è‡ªåŠ¨åˆ·æ–°ï¼‰

### å…¸å‹ä½¿ç”¨åœºæ™¯
- **æŸ¥çœ‹è¶‹åŠ¿**: å›¾è¡¨å¿«é€Ÿäº†è§£æœ€è¿‘æ´»è·ƒåº¦
- **æŸ¥æ‰¾ä¼šè¯**: æŒ‰ç±»å‹/ç›®å½•è¿‡æ»¤
- **åˆ†æè¯¦æƒ…**: ç‚¹å‡»ä¼šè¯æŸ¥çœ‹å®Œæ•´ä¿¡æ¯
- **ç›‘æ§å®æ—¶**: WebSocket æ¨é€æ–°ä¼šè¯

## ğŸ”’ å®‰å…¨æ€§

### å†…ç½®å®‰å…¨æªæ–½
1. **æœ¬åœ°ç»‘å®š**: é»˜è®¤ä»…ç›‘å¬ `127.0.0.1`
2. **æ— è®¤è¯**: ä»…é€‚åˆæœ¬åœ°ä½¿ç”¨
3. **æ•°æ®éš”ç¦»**: ä¸æš´éœ²æ•æ„Ÿç³»ç»Ÿä¿¡æ¯
4. **CORS é™åˆ¶**: ä»…å…è®¸åŒæºè¯·æ±‚

### è¿œç¨‹è®¿é—®å»ºè®®
ä½¿ç”¨ SSH éš§é“:
```bash
ssh -L 3000:127.0.0.1:3000 user@host
```

## âš¡ æ€§èƒ½æŒ‡æ ‡

### èµ„æºå ç”¨
- **å¯åŠ¨æ—¶é—´**: < 1 ç§’
- **å†…å­˜å ç”¨**: ~30MBï¼ˆç‹¬ç«‹è¿è¡Œï¼‰
- **CPU å ç”¨**: < 1%ï¼ˆç©ºé—²æ—¶ï¼‰

### å“åº”æ€§èƒ½
- **API å“åº”**: < 10msï¼ˆæœ¬åœ°ï¼‰
- **é¡µé¢åŠ è½½**: < 500ms
- **WebSocket å»¶è¿Ÿ**: < 5ms

### å¹¶å‘èƒ½åŠ›
- æ”¯æŒ 50+ åŒæ—¶ WebSocket è¿æ¥
- 100+ req/sï¼ˆAPI ååï¼‰

## ğŸš€ æœªæ¥æ‰©å±•

### çŸ­æœŸä¼˜åŒ–
- [ ] æ·»åŠ ä¼šè¯æœç´¢ï¼ˆå…¨æ–‡ï¼‰
- [ ] å¯¼å‡ºåŠŸèƒ½ï¼ˆCSV/JSONï¼‰
- [ ] ä¼šè¯æ¯”è¾ƒå·¥å…·
- [ ] æ›´å¤šå›¾è¡¨ç±»å‹ï¼ˆçƒ­åŠ›å›¾ã€æ¡‘åŸºå›¾ï¼‰

### é•¿æœŸè§„åˆ’
- [ ] å¤šè¯­è¨€æ”¯æŒï¼ˆi18nï¼‰
- [ ] ä¸»é¢˜åˆ‡æ¢ï¼ˆæš—è‰²æ¨¡å¼ï¼‰
- [ ] è‡ªå®šä¹‰ä»ªè¡¨æ¿
- [ ] æ’ä»¶ç³»ç»Ÿ

## ğŸ“ æµ‹è¯•ç»“æœ

### åŠŸèƒ½æµ‹è¯•
âœ… Web æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
âœ… API å¥åº·æ£€æŸ¥é€šè¿‡
âœ… ç»Ÿè®¡æ•°æ®æ­£ç¡®è¿”å›
âœ… é™æ€æ–‡ä»¶æ­£å¸¸åŠ è½½
âœ… WebSocket è¿æ¥æ­£å¸¸

### API ç«¯ç‚¹æµ‹è¯•
```bash
# å¥åº·æ£€æŸ¥
curl http://127.0.0.1:3000/api/health
# è¿”å›: {"status":"ok","timestamp":"...","version":"1.0.0"}

# å…¨å±€ç»Ÿè®¡
curl http://127.0.0.1:3000/api/stats/global
# è¿”å›: {"total_sessions":50,"by_type":{...},...}
```

### æµè§ˆå™¨æµ‹è¯•
âœ… é¡µé¢æ­£ç¡®æ¸²æŸ“
âœ… å›¾è¡¨æ­£å¸¸æ˜¾ç¤º
âœ… è¿‡æ»¤åŠŸèƒ½æ­£å¸¸
âœ… æ¨¡æ€æ¡†äº¤äº’æ­£å¸¸
âœ… WebSocket å®æ—¶æ›´æ–°

## ğŸ‰ æ€»ç»“

æˆåŠŸå®ç°äº†å®Œæ•´çš„ Web UI å¯è§†åŒ–ç•Œé¢ï¼š

1. **æ¶æ„åˆç†** - åˆ†å±‚æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
2. **æŠ€æœ¯å…ˆè¿›** - åˆ©ç”¨ Bun åŸç”Ÿèƒ½åŠ›
3. **åŠŸèƒ½å®Œæ•´** - è¦†ç›–æŸ¥è¯¢ã€ç»Ÿè®¡ã€å®æ—¶æ›´æ–°
4. **ä½“éªŒä¼˜ç§€** - å“åº”å¼è®¾è®¡ï¼Œæ“ä½œæµç•…
5. **æ–‡æ¡£é½å…¨** - ä½¿ç”¨æŒ‡å—ã€API æ–‡æ¡£
6. **æµ‹è¯•é€šè¿‡** - æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éªŒè¯

**ä»£ç ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 8 ä¸ª
- æ–°å¢ä»£ç : ~1800 è¡Œ
- æäº¤è®°å½•: 2 ä¸ª

è¿™ä¸ª Web UI ä¸º Claude Code ä¼šè¯å†å²ç³»ç»Ÿæä¾›äº†å¼ºå¤§çš„å¯è§†åŒ–èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒäº†è½»é‡ã€é«˜æ•ˆã€å®‰å…¨çš„ç‰¹æ€§ã€‚
